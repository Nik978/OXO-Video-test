<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>OXO Scheduler</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      background: black;
      overflow: hidden;
    }
    video {
      width: 100vw;
      height: 100vh;
      object-fit: cover;
    }
  </style>
</head>
<body>
  <video id="video" autoplay muted></video>
  <script>
    const schedules = {
      "Sun": {
        pre: ["Happy", "Football", "Happy", "Bucket"],
        post: ["Intro", "Football", "Bucket", "Happy", "Football", "Cosplay", "Football", "Recruit"]
      },
      "Mon": {
        pre: ["Happy", "Football", "Happy", "Bucket"],
        post: ["Intro", "Football", "Bucket", "Happy", "Football", "Cosplay", "Football", "Recruit"]
      },
      "Tue": {
        pre: ["Happy", "Football", "Happy", "Bucket"],
        post: ["Intro", "Football", "Bucket", "Happy", "Football", "Cosplay", "Football", "Recruit"]
      },
      "Wed": {
        pre: ["Happy", "Football", "Happy", "Bucket"],
        post: ["Intro", "Football", "Bucket", "Happy", "Football", "Cosplay", "Football", "Recruit"]
      },
      "Thu": {
        pre: ["Bucket", "Football", "Bucket", "Happy", "Bucket"],
        post: ["Intro", "Bucket", "Football", "Bucket", "Happy", "Bucket", "Cosplay", "Bucket", "Recruit"]
      },
      "Fri": {
        pre: ["Happy", "Football", "Happy", "Bucket"],
        post: ["Intro", "Football", "Bucket", "Happy", "Football", "Cosplay", "Football", "Recruit"]
      },
      "Sat": {
        pre: ["Happy", "Football", "Happy", "Football"],
        post: ["Football"]
      }
    };

    const video = document.getElementById("video");

    function getCurrentPlaylist() {
      const now = new Date();
      const day = now.toString().slice(0, 3);
      const h = now.getHours();
      const m = now.getMinutes();
      const totalMin = h * 60 + m;
      const start = 18 * 60 + 30;
      const mid = 21 * 60;
      const end = 28 * 60; // 04:00 is 28:00

      if (totalMin >= start && totalMin < mid) {
        return schedules[day].pre;
      } else {
        return schedules[day].post;
      }
    }

    let playlist = getCurrentPlaylist();
    let current = 0;

    function playVideo() {
      video.src = playlist[current] + ".mp4";
      video.load();
      video.play();
    }

    video.onended = function () {
      current = (current + 1) % playlist.length;
      playVideo();
    }

    playVideo();
  </script>
  <!-- COUNTDOWN -->
  
    <div id="countdown" style="position: absolute; top: 5%; right: 5%; font-size: 3em; color: white; background: rgba(0,0,0,0.6); padding: 10px; border-radius: 10px;"></div>
    <script>
      function updateCountdown() {
        const target = new Date();
        target.setHours(2, 0, 0, 0); // 2:00 AM
        if (new Date().getHours() < 18) target.setDate(target.getDate() + 1);
        const now = new Date();
        const diff = target - now;
        if (diff > 0) {
          const hrs = Math.floor(diff / 36e5);
          const mins = Math.floor((diff % 36e5) / 6e4);
          const secs = Math.floor((diff % 6e4) / 1000);
          document.getElementById("countdown").innerText = `Match inizia tra ${hrs}h ${mins}m ${secs}s`;
        } else {
          document.getElementById("countdown").innerText = "Match in corso";
        }
      }
      setInterval(updateCountdown, 1000);
      updateCountdown();
    </script>

</body>
</html>
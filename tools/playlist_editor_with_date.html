<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OXO Playlist Editor</title>
  <style>
    body {
      font-family: sans-serif;
      background: #111;
      color: #eee;
      padding: 20px;
    }
    select, input, button, textarea {
      margin: 5px;
      padding: 5px;
    }
    textarea {
      width: 100%;
      height: 300px;
    }
    .section {
      margin-bottom: 15px;
      border: 1px solid #444;
      padding: 10px;
      background: #222;
    }
  </style>
</head>
<body>
  <h1>OXO Playlist Editor with Date Support</h1>

  <label for="daySelect">Day (1=Mon ... 7=Sun or YYYY-MM-DD):</label>
  <input type="text" id="daySelect" placeholder="4 or 2025-06-01">

  <div id="sections"></div>

  <button onclick="addSection()">âž• Add Section</button>
  <button onclick="exportJSON()">ðŸ“¤ Export JSON</button>

  <h3>Resulting JSON:</h3>
  <textarea id="output" readonly></textarea>

  <script>
    let data = {};

    function addSection() {
      const container = document.createElement("div");
      container.className = "section";

      const sectionInput = document.createElement("input");
      sectionInput.placeholder = "Section (e.g. DJ)";
      container.appendChild(sectionInput);

      const videosInput = document.createElement("input");
      videosInput.placeholder = "Videos (comma separated)";
      container.appendChild(videosInput);

      document.getElementById("sections").appendChild(container);
    }

    function exportJSON() {
      const dayKey = document.getElementById("daySelect").value.trim();
      if (!dayKey) return alert("Inserisci un giorno valido.");

      const sectionDivs = document.querySelectorAll(".section");
      const entry = {};

      sectionDivs.forEach(div => {
        const [sectionInput, videosInput] = div.querySelectorAll("input");
        const sectionName = sectionInput.value.trim();
        const videos = videosInput.value.trim().split(",").map(v => v.trim()).filter(v => v);

        if (sectionName && videos.length) {
          entry[sectionName] = videos;
        }
      });

      if (Object.keys(entry).length > 0) {
        data[dayKey] = entry;
        document.getElementById("output").value = JSON.stringify(data, null, 2);
      } else {
        alert("Nessuna sezione valida trovata.");
      }
    }
  </script>
</body>
</html>
